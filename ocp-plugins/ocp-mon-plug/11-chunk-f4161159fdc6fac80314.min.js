"use strict";(self.webpackChunkmonitoring_plugin=self.webpackChunkmonitoring_plugin||[]).push([[11],{30626:(e,o,t)=>{t.d(o,{Z:()=>f});var n=t(20559),r=t.n(n),l=t(93476),c=t.n(l),a=t(91678),i=t.n(a),s=new URL(t(11355),t.b),p=c()(r()),m=i()(s);p.push([e.id,'@font-face{font-family:"codicon";src:url('+m+");font-weight:lighter;font-style:normal}","",{version:3,sources:["webpack://./components/_promql-expression-input.scss"],names:[],mappings:"AAAA,WACE,qBAAA,CACA,2CAAA,CACA,mBAAA,CACA,iBAAA",sourcesContent:["@font-face {\n  font-family: 'codicon';\n  src: url('./codicon.ttf');\n  font-weight: lighter;\n  font-style: normal;\n}\n"],sourceRoot:""}]);const f=p},56011:(e,o,t)=>{t.r(o),t.d(o,{PromQLExpressionInput:()=>T,promqlHighlighter:()=>F,selectAutocompleteOnHoverPlugin:()=>W,theme:()=>N});var n=t(57774),r=t(71617),l=t(95740),c=t(53374),a=t(946),i=t(68926),s=t(77606),p=t(25777),m=t(37901),f=t(37786),u=t(53263),d=t(79830),g=t(56271),h=t(60733),b=t(48801),v=t(19610),x=t(1892),C=t.n(x),y=t(95760),A=t.n(y),w=t(38311),k=t.n(w),E=t(58192),I=t.n(E),_=t(38060),S=t.n(_),B=t(54865),M=t.n(B),q=t(30626),J={};J.styleTagTransform=M(),J.setAttributes=I(),J.insert=k().bind(null,"head"),J.domAPI=A(),J.insertStyleElement=S(),C()(q.Z,J),q.Z&&q.Z.locals&&q.Z.locals;const L=new d.q9,N=p.tk.theme({".cm-scroller":{fontFamily:"inherit"},".cm-content":{caretColor:"auto"},"&.cm-focused.cm-editor":{outline:"none"},".cm-tooltip.cm-completionInfo":{backgroundColor:"var(--pf-global--BackgroundColor--200)",border:"none",marginTop:"-11px",padding:"10px"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent",borderRightColor:"var(--pf-global--BackgroundColor--200)"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent",borderLeftColor:"var(--pf-global--BackgroundColor--200)"},marginRight:"12px"},".cm-completionIcon":{fontFamily:"codicon",width:"1.5em",verticalAlign:"middle"},".cm-selectionMatch":{backgroundColor:"var(--pf-global--BackgroundColor--100)"},".cm-completionDetail":{float:"right",color:"var(--pf-global--palette--black-500)"},".cm-tooltip":{backgroundColor:"var(--pf-global--BackgroundColor--100)",borderColor:"var(--pf-global--BorderColor--100)"},".cm-tooltip.cm-tooltip-autocomplete":{boxShadow:"var(--pf-global--BoxShadow--sm)","& > ul":{fontFamily:"var(--pf-c-code-block__pre--FontFamily), monospace",fontSize:"var(--pf-global--FontSize--sm)"},"& > ul > li[aria-selected]":{backgroundColor:"var(--pf-global--BackgroundColor--200)",color:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"}},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"var(--pf-global--palette--blue-400)"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"var(--pf-global--palette--purple-500)"},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"var(--pf-global--primary-color--100)"},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"var(--pf-global--palette--black-600)"},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"var(--pf-global--palette--gold-400)"}}),W=p.lg.fromClass(class{constructor(e){this.view=e,this.optionsLength=0,this.lastIndex=-1,this.view.dom.addEventListener("mousemove",this.onMouseMove=this.onMouseMove.bind(this))}update(e){this.optionsLength=(0,n.SI)(e.state).length}findHoveredOptionIndex(e){let o=null;for(;e&&e!==this.view.dom;){if("LI"===e.nodeName){o=e;break}e=e.parentElement}return o&&o.parentNode?Array.from(o.parentNode.children).indexOf(o):-1}onMouseMove(e){const o=e.target,t=this.findHoveredOptionIndex(o);t>=0&&this.lastIndex!==t&&(this.lastIndex=t,this.view.dispatch({effects:(0,n.gY)(t)}))}destroy(){this.view.dom.removeEventListener("mousemove",this.onMouseMove)}}),F=l.Qf.define([{tag:c.pJ.name,color:"#000"},{tag:c.pJ.number,color:"var(--pf-global--success-color--100)"},{tag:c.pJ.string,color:"var(--pf-global--danger-color--200)"},{tag:c.pJ.keyword,color:"var(--pf-global--default-color--200)",fontWeight:"bold"},{tag:c.pJ.function(c.pJ.variableName),color:"var(--pf-global--default-color--200)",fontWeight:"bold"},{tag:c.pJ.labelName,color:"var(--pf-global--warning-color--200)"},{tag:c.pJ.operator},{tag:c.pJ.modifier,color:"var(--pf-global--default-color--200)",fontWeight:"bold"},{tag:c.pJ.paren},{tag:c.pJ.squareBracket},{tag:c.pJ.brace},{tag:c.pJ.invalid,color:"red"},{tag:c.pJ.comment,color:"#888",fontStyle:"italic"}]),T=({value:e,onExecuteQuery:o,onValueChange:t,onSelectionChange:c})=>{const{t:d}=(0,h.useTranslation)("plugin__monitoring-plugin"),x=g.useRef(null),C=g.useRef(null),[y,A]=g.useState([]),[w,k]=g.useState(),E=d("Expression (press Shift+Enter for newlines)"),I=g.useCallback((0,b.b)(),[]);g.useEffect((()=>{I(`${v.Uq}/${m.PrometheusEndpoint.LABEL}/__name__/values`).then((e=>{const o=e?.data;A(o)})).catch((e=>{if("AbortError"!==e.name){const o=d(403===e?.response?.status?"Access restricted.":"Failed to load metrics list.");k(o)}}))}),[I,d]),g.useEffect((()=>{if(null!==C.current){const o=C.current.state.doc.toString();o!==e&&C.current.dispatch({changes:{from:0,to:o.length,insert:e}})}}),[e]);const _=g.useMemo((()=>({focus:()=>C.current.focus(),setSelectionRange:(e,o)=>{C.current.dispatch({selection:{anchor:e,head:o}})}})),[]);return g.useEffect((()=>{if(L.setComplete({remote:{url:v.Uq,httpMethod:"GET",cache:{initialMetricList:y}}}),null===C.current){if(!x.current)throw new Error("expected CodeMirror container element to exist");const m=s.yy.create({doc:e,extensions:[N,(0,p.AE)(),(0,r.m8)(),s.yy.allowMultipleSelections.of(!0),(0,l.nY)(),(0,l.n$)(),(0,n.vQ)(),(0,n.ys)(),W,(0,i.sW)(),p.tk.lineWrapping,p.tk.contentAttributes.of({"aria-label":E}),p.$f.of([...n.GA,...r.wQ,...r.f$,...n.B1,...a.Fv]),(0,p.W$)(E),(0,l.nF)(F),L.asExtension(),p.$f.of([{key:"Escape",run:e=>(e.contentDOM.blur(),!1)}]),s.Wl.highest(p.$f.of([{key:"Enter",run:()=>(o?.(),!0)},{key:"Shift-Enter",run:r.xx}])),p.tk.updateListener.of((e=>{const{from:o,to:n}=e.state.selection.main;c?.(_,o,n);const r=e.state.doc.toString();t(r)}))]}),f=new p.tk({state:m,parent:x.current});C.current=f,f.focus()}}),[y,t,o,E,e,c,_]),g.createElement("div",{className:"query-browser__query pf-c-dropdown"},g.createElement("div",{ref:x,onBlur:()=>{null!==C.current&&(0,n._B)(C.current)},className:"pf-c-form-control query-browser__query-input"}),w&&g.createElement("div",{className:"pf-c-form__helper-text",id:"helper-text-promql-expression-input","aria-live":"polite"},g.createElement("div",{className:"pf-c-helper-text"},g.createElement("div",{className:"pf-c-helper-text__item pf-m-warning"},g.createElement(m.YellowExclamationTriangleIcon,{className:"pf-c-helper-text__item-icon"}),g.createElement("span",{className:"pf-c-helper-text__item-text"},w)))),g.createElement(f.Button,{"aria-label":d("Clear query"),className:"query-browser__clear-icon",onClick:()=>{if(null!==C.current){const e=C.current.state.doc.toString().length;C.current.dispatch({changes:{from:0,to:e}})}t("")},variant:"plain"},g.createElement(u.Tw,null)))}},11355:(e,o,t)=>{e.exports=t.p+"assets/codicon..ttf"}}]);